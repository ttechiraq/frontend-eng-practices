"use strict";(self.webpackChunkfrontend_eng_practices=self.webpackChunkfrontend_eng_practices||[]).push([[503],{4418:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>o,toc:()=>d});const o=JSON.parse('{"id":"typescript/comments-and-documentation","title":"Comments and documentation","description":"JSDoc versus comments","source":"@site/docs/1-typescript/8-comments-and-documentation.md","sourceDirName":"1-typescript","slug":"/typescript/comments-and-documentation","permalink":"/frontend-eng-practices/typescript/comments-and-documentation","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/1-typescript/8-comments-and-documentation.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Toolchain requirements","permalink":"/frontend-eng-practices/typescript/toolchain-requirements"},"next":{"title":"Policies","permalink":"/frontend-eng-practices/typescript/policies"}}');var s=t(4848),r=t(8453);const a={sidebar_position:8},i="Comments and documentation",c={},d=[{value:"JSDoc versus comments",id:"jsdoc-versus-comments",level:2},{value:"Multi-line comments",id:"multi-line-comments",level:2},{value:"JSDoc general form",id:"jsdoc-general-form",level:2},{value:"Markdown",id:"markdown",level:2},{value:"JSDoc tags",id:"jsdoc-tags",level:2},{value:"Line wrapping",id:"line-wrapping",level:2},{value:"Document all top-level exports of modules",id:"document-all-top-level-exports-of-modules",level:2},{value:"Class comments",id:"class-comments",level:2},{value:"Method and function comments",id:"method-and-function-comments",level:2},{value:"Parameter property comments",id:"parameter-property-comments",level:2},{value:"JSDoc type annotations",id:"jsdoc-type-annotations",level:2},{value:"Make comments that actually add information",id:"make-comments-that-actually-add-information",level:2},{value:"Comments when calling a function",id:"comments-when-calling-a-function",level:2},{value:"Place documentation prior to decorators",id:"place-documentation-prior-to-decorators",level:2}];function l(e){const n={a:"a",code:"code",del:"del",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"comments-and-documentation",children:"Comments and documentation"})}),"\n",(0,s.jsx)(n.h2,{id:"jsdoc-versus-comments",children:"JSDoc versus comments"}),"\n",(0,s.jsxs)(n.p,{children:["There are two types of comments, JSDoc (",(0,s.jsx)(n.code,{children:"/** ... */"}),") and non-JSDoc ordinary comments (",(0,s.jsx)(n.code,{children:"// ..."})," or ",(0,s.jsx)(n.code,{children:"/* ... */"}),")."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"/** JSDoc */"})," comments for documentation, i.e. comments a user of the code should read."]}),"\n",(0,s.jsxs)(n.li,{children:["Use ",(0,s.jsx)(n.code,{children:"// line comments"})," for implementation comments, i.e. comments that only concern the implementation of the code itself."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"JSDoc comments are understood by tools (such as editors and documentation generators), while ordinary comments are only for other humans."}),"\n",(0,s.jsx)(n.h2,{id:"multi-line-comments",children:"Multi-line comments"}),"\n",(0,s.jsxs)(n.p,{children:["Multi-line comments are indented at the same level as the surrounding code. They must use multiple single-line comments (",(0,s.jsx)(n.code,{children:"//"}),"-style), not block comment style (",(0,s.jsx)(n.code,{children:"/* */"}),")."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// This is\n// fine\n\n/*\n* This should\n* use multiple\n* single-line comments\n*/\n\n/* This should use // */\n"})}),"\n",(0,s.jsx)(n.p,{children:"Comments are not enclosed in boxes drawn with asterisks or other characters."}),"\n",(0,s.jsx)(n.h2,{id:"jsdoc-general-form",children:"JSDoc general form"}),"\n",(0,s.jsx)(n.p,{children:"The basic formatting of JSDoc comments is as seen in this example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/**\n * Multiple lines of JSDoc text are written here,\n * wrapped normally.\n * @param arg A number to do something to.\n */\nfunction doSomething(arg: number) { \u2026 }\n"})}),"\n",(0,s.jsx)(n.p,{children:"or in this single-line example:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/** This short jsdoc describes the function. */\nfunction doSomething(arg: number) { \u2026 }\n"})}),"\n",(0,s.jsxs)(n.p,{children:["If a single-line comment overflows into multiple lines, it must use the multi-line style with ",(0,s.jsx)(n.code,{children:"/**"})," and ",(0,s.jsx)(n.code,{children:"*/"})," on their own lines."]}),"\n",(0,s.jsx)(n.p,{children:"Many tools extract metadata from JSDoc comments to perform code validation and optimization. As such, these comments must be well-formed."}),"\n",(0,s.jsx)(n.h2,{id:"markdown",children:"Markdown"}),"\n",(0,s.jsx)(n.p,{children:"JSDoc is written in Markdown, though it may include HTML when necessary."}),"\n",(0,s.jsx)(n.p,{children:"This means that tooling parsing JSDoc will ignore plain text formatting, so if you did this:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/**\n * Computes weight based on three factors:\n * items sent\n * items received\n * last timestamp\n */\n"})}),"\n",(0,s.jsx)(n.p,{children:"it will be rendered like this:"}),"\n",(0,s.jsx)(n.p,{children:"Computes weight based on three factors: items sent items received last timestamp"}),"\n",(0,s.jsx)(n.p,{children:"Instead, write a Markdown list:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/**\n * Computes weight based on three factors:\n *\n * - items sent\n * - items received\n * - last timestamp\n */\n"})}),"\n",(0,s.jsx)(n.h2,{id:"jsdoc-tags",children:"JSDoc tags"}),"\n",(0,s.jsx)(n.p,{children:"Google style allows a subset of JSDoc tags. Most tags must occupy their own line, with the tag at the beginning of the line."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'/**\n * The "param" tag must occupy its own line and may not be combined.\n * @param left A description of the left param.\n * @param right A description of the right param.\n */\nfunction add(left: number, right: number) { ... }\n'})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'/**\n * The "param" tag must occupy its own line and may not be combined.\n * @param left @param right\n */\nfunction add(left: number, right: number) { ... }\n'})}),"\n",(0,s.jsx)(n.h2,{id:"line-wrapping",children:"Line wrapping"}),"\n",(0,s.jsx)(n.p,{children:"Line-wrapped block tags are indented four spaces. Wrapped description text may be lined up with the description on previous lines, but this horizontal alignment is discouraged."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/**\n * Illustrates line wrapping for long param/return descriptions.\n * @param foo This is a param with a particularly long description that just\n *     doesn't fit on one line.\n * @return This returns something that has a lengthy description too long to fit\n *     in one line.\n */\nexports.method = function(foo) {\n  return 5;\n};\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Do not indent when wrapping a ",(0,s.jsx)(n.code,{children:"@desc"})," or ",(0,s.jsx)(n.code,{children:"@fileoverview"})," description."]}),"\n",(0,s.jsx)(n.h2,{id:"document-all-top-level-exports-of-modules",children:"Document all top-level exports of modules"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"/** JSDoc */"})," comments to communicate information to the users of your code. Avoid merely restating the property or parameter name. You should also document all properties and methods (exported/public or not) whose purpose is not immediately obvious from their name, as judged by your reviewer."]}),"\n",(0,s.jsx)(n.p,{children:"Exception: Symbols that are only exported to be consumed by tooling, such as @NgModule classes, do not require comments."}),"\n",(0,s.jsx)(n.h2,{id:"class-comments",children:"Class comments"}),"\n",(0,s.jsx)(n.p,{children:"JSDoc comments for classes should provide the reader with enough information to know how and when to use the class, as well as any additional considerations necessary to correctly use the class. Textual descriptions may be omitted on the constructor."}),"\n",(0,s.jsx)(n.h2,{id:"method-and-function-comments",children:"Method and function comments"}),"\n",(0,s.jsx)(n.p,{children:"Method, parameter, and return descriptions may be omitted if they are obvious from the rest of the method's JSDoc or from the method name and type signature."}),"\n",(0,s.jsxs)(n.p,{children:["Method descriptions begin with a verb phrase that describes what the method does. This phrase is not an imperative sentence, but instead is written in the third person, as if there is an implied ",(0,s.jsx)(n.code,{children:"This method ..."})," before it."]}),"\n",(0,s.jsx)(n.h2,{id:"parameter-property-comments",children:"Parameter property comments"}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.a,{href:"https://www.typescriptlang.org/docs/handbook/2/classes.html#parameter-properties",children:"parameter property"})," is a constructor parameter that is prefixed by one of the modifiers ",(0,s.jsx)(n.code,{children:"private"}),", ",(0,s.jsx)(n.code,{children:"protected"}),", ",(0,s.jsx)(n.code,{children:"public"}),", or ",(0,s.jsx)(n.code,{children:"readonly"}),". A parameter property declares both a parameter and an instance property, and implicitly assigns into it. For example, ",(0,s.jsx)(n.code,{children:"constructor(private readonly foo: Foo)"}),", declares that the constructor takes a parameter ",(0,s.jsx)(n.code,{children:"foo"}),", but also declares a private readonly property ",(0,s.jsx)(n.code,{children:"foo"}),", and assigns the parameter into that property before executing the remainder of the constructor."]}),"\n",(0,s.jsxs)(n.p,{children:["To document these fields, use JSDoc's ",(0,s.jsx)(n.code,{children:"@param"})," annotation. Editors display the description on constructor calls and property accesses."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/** This class demonstrates how parameter properties are documented. */\nclass ParamProps {\n  /**\n   * @param percolator The percolator used for brewing.\n   * @param beans The beans to brew.\n   */\n  constructor(\n      private readonly percolator: Percolator,\n      private readonly beans: CoffeeBean[]) {}\n}\n\n/** This class demonstrates how ordinary fields are documented. */\nclass OrdinaryClass {\n  /** The bean that will be used in the next call to brew(). */\n  nextBean: CoffeeBean;\n\n  constructor(initialBean: CoffeeBean) {\n    this.nextBean = initialBean;\n  }\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"jsdoc-type-annotations",children:"JSDoc type annotations"}),"\n",(0,s.jsxs)(n.p,{children:["JSDoc type annotations are redundant in TypeScript source code. Do not declare types in ",(0,s.jsx)(n.code,{children:"@param"})," or ",(0,s.jsx)(n.code,{children:"@return"})," blocks, do not write ",(0,s.jsx)(n.code,{children:"@implements"}),", ",(0,s.jsx)(n.code,{children:"@enum"}),", ",(0,s.jsx)(n.code,{children:"@private"}),", ",(0,s.jsx)(n.code,{children:"@override"})," etc. on code that uses the ",(0,s.jsx)(n.code,{children:"implements"}),", ",(0,s.jsx)(n.code,{children:"enum"}),", ",(0,s.jsx)(n.code,{children:"private"}),", ",(0,s.jsx)(n.code,{children:"override"})," etc. keywords."]}),"\n",(0,s.jsx)(n.h2,{id:"make-comments-that-actually-add-information",children:"Make comments that actually add information"}),"\n",(0,s.jsx)(n.p,{children:"For non-exported symbols, sometimes the name and type of the function or parameter is enough. Code will usually benefit from more documentation than just variable names though!"}),"\n",(0,s.jsx)(n.p,{children:"Avoid comments that just restate the parameter name and type, e.g."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/** @param fooBarService The Bar service for the Foo application. */\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Because of this rule, ",(0,s.jsx)(n.code,{children:"@param"})," and ",(0,s.jsx)(n.code,{children:"@return"})," lines are only required when they add information, and may otherwise be omitted."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/**\n * POSTs the request to start coffee brewing.\n * @param amountLitres The amount to brew. Must fit the pot size!\n */\nbrew(amountLitres: number, logger: Logger) {\n  // ...\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"comments-when-calling-a-function",children:"Comments when calling a function"}),"\n",(0,s.jsx)(n.p,{children:'"Parameter name" comments should be used whenever the method name and parameter value do not sufficiently convey the meaning of the parameter.'}),"\n",(0,s.jsx)(n.p,{children:"Before adding these comments, consider refactoring the method to instead accept an interface and destructure it to greatly improve call-site readability."}),"\n",(0,s.jsxs)(n.p,{children:["Parameter name comments go before the parameter value, and include the parameter name and a ",(0,s.jsx)(n.code,{children:"="})," suffix:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"someFunction(obviousParam, /* shouldRender= */ true, /* name= */ 'hello');\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Existing code may use a legacy parameter name comment style, which places these comments ",(0,s.jsx)(n.del,{children:"after"})," the parameter value and omits the ",(0,s.jsx)(n.code,{children:"="}),". Continuing to use this style within the file for consistency is acceptable."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"someFunction(obviousParam, true /* shouldRender */, 'hello' /* name */);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"place-documentation-prior-to-decorators",children:"Place documentation prior to decorators"}),"\n",(0,s.jsxs)(n.p,{children:["When a class, method, or property have both decorators like ",(0,s.jsx)(n.code,{children:"@Component"})," and JsDoc, please make sure to write the JsDoc before the decorator."]}),"\n",(0,s.jsx)(n.p,{children:"Do not write JsDoc between the Decorator and the decorated statement."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"@Component({ selector: 'foo', template: 'bar', })\n/** Component that prints \"bar\". */\nexport class FooComponent {}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Write the JsDoc block before the Decorator."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"/** Component that prints \"bar\". */\n@Component({ selector: 'foo', template: 'bar', })\nexport class FooComponent {}\n"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var o=t(6540);const s={},r=o.createContext(s);function a(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),o.createElement(r.Provider,{value:n},e.children)}}}]);